#!/usr/bin/make -f
# -*- coding: utf-8 -*-

DEB_BUILD_MAINT_OPTIONS = future=+lfs hardening=+all reproducible=+fixfilepath
DH_INTERNAL_OPTIONS     = -v
DH_VERBOSE              = 1
export DEB_BUILD_MAINT_OPTIONS DH_INTERNAL_OPTIONS DH_VERBOSE

DPKG_EXPORT_BUILDFLAGS  = 1
include /usr/share/dpkg/default.mk


%:
	dh $@ --with python3


override_dh_auto_clean:
	rm -rf $(CURDIR)/builddir

override_dh_auto_configure:
	install -d $(CURDIR)/builddir
	meson setup --prefix=/usr --buildtype debugoptimized --optimization 2 \
		--strip $(CURDIR)/builddir $(CURDIR)

override_dh_auto_build:
	ninja -v -C $(CURDIR)/builddir

override_dh_auto_install:
	DESTDIR=$(CURDIR)/debian/hardcode-tray ninja -v -C $(CURDIR)/builddir install

override_dh_auto_test:
